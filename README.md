# Ligi Predictor

# Domain Knowledge

- Nine major entities for GamePlay

## Entities

### Competition

- Represents a footbal tournament.
- It has both a unique slug and a unique two to four letter-code.
- It consists of **Season**s which hold a number of scheduled or finished games named **Match**.
- A certain number of **Team**s participate in one particular Season of a Competion.
- The default competition is premier-league. _[note]_ Currently it is the only competitition.

### Season

- Represents a period of time, typically spanning weeks, during which competition matches are played.
- A season cannot last more than a year.
- A season has **Team**s and comprises of **GameRound**s

### Team

- Represents an organisation of people that participates in one particular **Season** of a **Competition**
- Each Season needs to have teams for it to have **Match**es. _[note]_ When a team belongs to a Season it is refered to as a **SeasonTeam**
- Each team has a name, a short name and an optional list of aliases. It also has an official three-letter-acronym. _[note]_ Man-Utd example

```
name: Manchester United
short-name: Man United
aliases: [Man Utd]
tla: MUN
```

### GameRound (aka Round)

- A GameRound is an element of **Season** and represents a grouping of **Match**es.
- It has a position which is an ordinal number.
- If you have played fantasy premier league, a GameRound is the same as Gameweek. At the beginning of the season each match is assigned a matchday and a round. The matchday stays intact throughout the season but the round can change due to rescheduling.
- It is possible for a team to have two matches in one GameRound or none at all.

### Match

- Reflects a scheduled or finished football game. Each match has a kickoff date-time.
- It belongs to a competition and a season, played on a certain matchday and grouped in a **GameRound**.
- A match always belongs to a one GameRound.
- Each season-team typically plays one match per GameRound but there are exceptions to this rule. Certain matches can be rescheduled due to cup competitions, fixture congestion, postponements or other reasons. These matches may need to be moved out of the original GameRound and placed in another.

### Predictor (aka User)

- A user who predicts match results.
- A unique username is used for identification. _[note]_ Currently only username and password are required for registration and login - this is subject to change.
- A predictor predicts the final score of a match and earns points based on the accuracy. _[note]_ See scoring system and examples.

### Prediction

- Represents a final-score prediction entered for a match. It also holds the points awarded.
- Points are calculated once a match ends.
- A prediction can be changed as many times as a user wants before kickoff. After kickoff it is locked.
- Once a predictor enters a season competition, from that point onwards, till the season ends, they cannot have a blank match prediction. Either
  - they entered a match-prediction
  - one was autogenerated randomly (between 0-0 and 4-3 or 3-4 by the system
- _[note]_ The game is a combination of skill and luck :) more so skill.
- An autogenerated prediction will become visible after match has kickedoff.
- For each **GameRound** a predictor is allowed one and only one **joker** prediction. If correct, the joker will double the points earned for the match. A joker is usually placed on the prediction that a predictor is most confident about.
- If a joker is not entered for the current round, one will be autogenerated. If autogenerated, the joker will be visible after its match has kicked-off.
- A predictor can change the the round joker as many times as they want but once the joker-match kicks-off they can't pick another round joker.

### Leaderboard

- Represents a ranked listing of users in a competition.
- From a leaderboard the user can see where they stand in comparison to other players.
- _[note]_ Currently all Leaderboards are Global and one of two types - Global-Round or Global-Season
- Global refers to the total set of users competiting in particular season tournament. All Global-\* boards are public by default and can be viewed by anyone.
- For each active season or round there is one corresponding Global-Season or Global-Round Leaderboard

### UserScore

- Represents the cumulative total scores of a predictor's **GameRound** or **Season** predictions in RankedOrder.
- Each UserScore belongs to one and only one **Leaderboard**.
- Alternatively, it represents the position of a predictor within a Leaderboard. It holds a new and previous position of the predictor, based on the scores.
- It orders the scores by i) total score (highest first), then by ii) most exact-scores iii) most correct outcomes iv) most exact goal-differences and finally v) most close scores _[note]_ see scoring system

## Scoring System

### How To Score

|                           |          |
| ------------------------- | -------- |
| Correct Outcome           | +7       |
| Correct Score             | +10      |
| Correct Goal Difference   | +1       |
| Correct Goals (home team) | +1       |
| Correct Goals (away team) | +1       |
| Correct Goals (bonus)     | +1       |
| Close Score               | +1 or +2 |
| Correct joker             | x2       |

### Clarifications

- Close Score +2
  - correct winner & 1 goal from actual score
  - correct draw outcome & 1 goal from both teams to actual score
- Close Score +1
  - correct winner & 1 goal from both teams to actual score
  - wrong outcome but 1 goal from actual score
- Correct-Goals bonus \* correct winner, correct 3 or more goal difference, not actual score, not 1 goal to actual score
  Predictor

### Fun facts

- The scoring system is additive/cumulative.
- For each prediction the max number of points is 20.
- For each prediction the next possible number of points is 10.
- For correctly predicting the winner, the least number of points is 7.
- For correctly predicting a draw, the least number of points is 8.
- For correctly predicting a draw, the possible points are 8, 10 and 20.
- For correctly predicting the winner, the possible points are 7,8,9,10,20.
- For incorrectly predicting the winner or draw, the possible points are 0,1,2.
- There are no negative points. Each point earned is valuable! :)
- _[Tip]_ Aim first to correctly predict the outcome - everything else is a bonus.

### Examples

**2-1 Final Score**

| Final Score | Prediction | Points |
| :---------: | :--------: | :----: |
|     2-1     |    2-1     |   20   |
|     2-1     |    3-1     |   10   |
|     2-1     |    2-0     |   10   |
|     2-1     |    1-0     |   9    |
|     2-1     |    3-0     |   8    |
|     2-1     |    4-0     |   7    |
|     2-1     |    1-1     |   2    |
|     2-1     |    0-1     |   1    |
|     2-1     |    1-2     |   0    |
|     2-1     |    0-0     |   0    |
|     2-1     |    4-3     |   8    |
|     2-1     |    4-1     |   8    |

**1-1 Final Score**

| Final Score | Prediction | Points |
| :---------: | :--------: | :----: |
|     1-1     |    1-1     |   20   |
|     1-1     |    2-2     |   10   |
|     1-1     |    0-0     |   10   |
|     1-1     |    3-3     |   8    |
|     1-1     |    1-0     |   2    |
|     1-1     |    1-3     |   1    |

**4-1 Final Score**

| Final Score | Prediction | Points |
| :---------: | :--------: | :----: |
|     4-1     |    4-1     |   20   |
|     4-1     |    4-0     |   10   |
|     4-1     |    5-1     |   10   |
|     4-1     |    3-0     |   10   |
|     4-1     |    3-1     |   10   |
|     4-1     |    5-0     |   9    |
|     4-1     |    6-1     |   9    |
|     4-1     |    6-3     |   9    |
|     4-1     |    6-2     |   8    |
|     4-1     |    2-1     |   8    |
|     4-1     |    2-0     |   7    |
|     4-1     |    1-0     |   7    |
